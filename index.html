<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Discharge Instructions Translator</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/qr-scanner@1.4.2/qr-scanner.umd.min.js"></script>
    <meta name="description" content="Translate medical discharge instructions into your preferred language">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>🏥 Discharge Instructions Translator</h1>
            <p>Scan your QR code to translate discharge instructions into your preferred language</p>
        </header>
        
        <main>
            <section class="scanner-section">
                <div class="language-selector">
                    <h3>🌐 Choose Your Language</h3>
                    <select id="languageSelect" aria-label="Select language for translation">
                        <option value="en">English</option>
                        <option value="es">Español (Spanish)</option>
                        <option value="fr">Français (French)</option>
                        <option value="de">Deutsch (German)</option>
                        <option value="it">Italiano (Italian)</option>
                        <option value="pt">Português (Portuguese)</option>
                        <option value="ru">Русский (Russian)</option>
                        <option value="zh">中文 (Chinese Simplified)</option>
                        <option value="ja">日本語 (Japanese)</option>
                        <option value="ko">한국어 (Korean)</option>
                        <option value="ar">العربية (Arabic)</option>
                        <option value="hi">हिन्दी (Hindi)</option>
                        <option value="th">ไทย (Thai)</option>
                        <option value="vi">Tiếng Việt (Vietnamese)</option>
                    </select>
                </div>

                <div class="scanner-controls">
                    <button id="startScan" class="btn btn-primary">📱 Start QR Scanner</button>
                    <button id="stopScan" class="btn btn-secondary" style="display: none;">⏹️ Stop Scanner</button>
                </div>
                
                <div class="camera-container">
                    <video id="qr-video"></video>
                </div>
                
                <div class="manual-input">
                    <h3>📝 Or Enter Discharge Information Manually</h3>
                    <textarea id="manualInput" placeholder="Paste or type your discharge information here..."></textarea>
                    <button id="processManual" class="btn btn-translate">🔄 Process & Translate</button>
                </div>

                <div id="status-messages"></div>
            </section>

            <section id="output" class="output-section">
                <div class="output-header">
                    <h2>📋 Your Discharge Instructions</h2>
                    <div class="language-info">
                        <strong>Language:</strong> <span id="selectedLanguage">English</span>
                    </div>
                </div>
                
                <div id="outputContent"></div>
                
                <div class="action-buttons">
                    <button id="printBtn" class="btn btn-print">🖨️ Print Instructions</button>
                    <button id="shareBtn" class="btn btn-share">📤 Share</button>
                </div>
            </section>
        </main>
    </div>

<!-- JavaScript Libraries -->
<!-- JavaScript Libraries - Fixed CDN links -->
<script src="https://unpkg.com/qr-scanner@1.4.2/qr-scanner.umd.min.js"></script>
<script src="https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js"></script>
<script src="https://unpkg.com/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>
    <script src="js/document-generator.js"></script>
    
    <!-- Your App Scripts -->
    <script src="js/translator.js"></script>
    <script src="js/medical-parser.js"></script>
    <script src="js/app.js"></script>
    <!-- Temporary diagnostic script -->
<script>
// Test if libraries loaded correctly
setTimeout(() => {
    console.log('🔍 LIBRARY CHECK:');
    console.log('QrScanner:', typeof QrScanner !== 'undefined' ? '✅' : '❌');
    console.log('QRCode:', typeof QRCode !== 'undefined' ? '✅' : '❌');
    console.log('jsPDF:', typeof jsPDF !== 'undefined' ? '✅' : '❌');
    
    // Test QR code generation
    if (typeof QRCode !== 'undefined') {
        QRCode.toDataURL('test', (err, url) => {
            console.log('QR Test:', err ? '❌ ' + err : '✅ Working');
        });
    }
    
    // Test PDF generation
    if (typeof jsPDF !== 'undefined') {
        try {
            const { jsPDF } = window;
            const doc = new jsPDF();
            console.log('PDF Test: ✅ Working');
        } catch (e) {
            console.log('PDF Test: ❌', e.message);
        }
    }
}, 1000);
</script>
</body>
</html>
